type Latent
type Observation

proc Model() -> preal | lat : Latent | obs : Observation = {
  v <- observe{lat}(GAMMA(2; 1));
  if{lat} v < 2.0 then
    _ <- sample{obs}(NORMAL(-1; 1));
    return v
  else
    m <- observe{lat}(BETA(3; 1));
    _ <- sample{obs}(NORMAL(m; 1));
    return v
}

proc Proposal() -> unit | . | lat : Latent = {
  v <- sample{lat}(GAMMA(1; 1));
  if{lat} . then
    return ()
  else
    _ <- sample{lat}(UNIF);
    return ()
}

infer {
  importance {
    nsamples: 1000;
  }; # algo
  Model(); # model
  Proposal(); # guide
  obs <- "example-1.in"; # input
  lat <- "example-1.out"; # output
}
